# 2.

## 题目大意

给定$n$位bit，一开始全为$1$，现在有两种操作，目标要把这$n$位bit全变成$0$

- 翻转第n位
- 如果bit最后z位都是0，那么翻转z+2位

### A.对于没有重复进行一个操作的序列来说，只存在唯一的操作序列使得达成目标

### B.描述解决这个问题的算法

### C.达成目标需要多少步操作

A.如果将每一种bit看作一个节点，连向可以通过操作得到的bit，那么起始点和目标点都是在同一条链上

B.根据A的结论可以知道，最终的操作序列肯定是第1个操作和第2个操作交替出现的，那么直接模拟这个过程就可以了

C.可以发现n为奇数的时候才存在解

设$f(n)$表示$n$位bit时候需要多少次操作才能完成

首先我们可以将后$n-2$位bit都变为$0$，操作数$f(n-2)$

然后用一次第二次操作使得变成$010000...00$，接下来就是把这个$1$不断后移

首先需要将$n-2$继续变回1，然后在$n-2$的链上往另一个方向走，直到变成$011000..00$，然后再进行一次第二次操作，变成一个规模更小的子问题，这里进行操作需要$2^{n-2}$次操作
$$
f(n)=f(n-2)+1+\sum\limits_{i=0}^{n-2}2^i=f(n-2)+2^{n-1}
$$
其中$f(1)=1$
$$
f(n)=\sum\limits_{i=0}^{\frac{n-1}{2}}4^{i}=\frac{4^{\frac{n+1}{2}}-1}{3}
$$

# 3.

## 题目大意

如果将汉诺塔中间那个柱子的规则改变，就是在这个柱子上，可以一次移动任意多个片到其他柱子上

其他规则不变，求出最小需要用多少步操作使得将左边柱子上的片全部移动到右边柱子上



考虑设$f(n)$表示将左边柱子上的移动到中间柱子上需要的操作数，$g(n)$​表示将左边柱子上的移动到右边柱子上需要的操作数，那么根据题目有

移动到中间，先将n-1个片移动到右边$=g(n-1)$，然后将最后一个移动到中间$=1$，然后在移动到中间$=f(n-1)$

移动到右边，先将n-1个片移动到中间$=f(n-1)$，然后将最后一个移动到右边$=1$，然后将中间全部移动到右边$=1$​

为了接下来生成函数方便，那么令$n'=n-1$，集体平移1
$$
f(n)=g(n-1)+f(n-1)+1\\
g(n)=f(n-1)+2
$$
其中$f(0)=g(0)=1$​，令$F=\sum f(i)x^i,G=\sum g(i)x^i$​
$$
F=x(F+G)+\frac{1}{1-x}\\
G=xF+\frac{2}{1-x}-1
$$
解出展开就可以得到通项$F=\frac{x^2+x+1}{(1-x)(-x^2-x+1)}$​



# NOIP 2017初赛

![20210828](D:\Blog\image\20210828.PNG)

考虑将x,y坐标分开考虑

其中x坐标为$1-3+5-7+...-2015+2017=2017-2\times 504=1009$

其中y坐标为$-2+4-6+8...-2014+2016=504\times 2=1008$