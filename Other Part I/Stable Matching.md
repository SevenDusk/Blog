# 稳定匹配问题

有$n$个医院，$n$个医生，每一个医院和医生都有对想选择的人或者医院的排序列表，越靠前就代表越喜欢

我们称一个匹配是稳定的当且仅当不存在一个医生$a$匹配了医院$A$，医院$B$匹配了医生$b$，并且对于$a$来说$B$相当于$A$更喜欢，对于B来说比b更喜欢a

现在需要找到这样一个完美匹配（根据下面的算法可以证明对于每一种情况来说，稳定匹配都是存在的）

## The Boston Pool and Gale-Shapley Algorithms

这个算法是一个贪心的过程，分成**最多**$n^2$​​轮，每一轮分成两个过程

![20210825](D:\Blog\image\20210825.PNG)

关于这个算法的时间复杂度，显然这个算法最多只会进行$n^2$次，应该每一个医院最多遍历其列表中的所有医生

### 正确性证明

考虑反证法，还是考虑一个医生$a$匹配了医院$A$，医院$B$匹配了医生$b$，假设$(a,B)$是不稳定的

由于每一个医生都是接受其收到的最好的邀请，那么就不可能存在一个比A更好的医院向a发出邀请，那么就跟题目假设矛盾

### 一些性质

我们称一个医生a对于医院A来说是feasible，当且仅当存在一个稳定匹配使得a与A匹配

#### 定理 1

对于医院A发出的邀请拒绝的是一定是 infeasible for A

证明可以根据归纳法得到

就是考虑a为了一个其他医院B拒绝了A，那么说明在B列表之前的医生都拒绝了B，那么根据归纳法就可以得到结论



根据这个结论，由于算法是从大往小考虑的，那么第一个出现没有拒绝A的医生就是最佳的医生（这个医生必须要是feasible）

同样的对于所有的医生来说，最终接受的那个医院一定是在其列表中最差的那个可以接受的医院

