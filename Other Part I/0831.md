# 唱片

## 题目大意

第一天可以收集x个，第二天收集2x个，第三天收集4x个……

至少两天后，收集到了n个，求出可能的x

## 算法讨论

显然第$i$收集到了$(2^i-1)x$个，那么枚举i即可

# 平衡数组

## 题目大意

构造长度为n的数组，n为偶数，前一半元素必须是正偶数，后一半的元素必须是正奇数，两两不同

要求前一半的元素之和，必须等于后一半的元素之和

## 算法讨论

如果$\frac{n}{2}$为奇数，那么显然前一半和后一半的奇偶性不同，无解

否则就构造$2,4,6,....,n,1,3,...,n-3,3n-1$的序列

# 交替子序列

## 题目大意

![20210831T](D:\Blog\image\20210831T.PNG)

## 算法讨论

求出极长连续正数段和负数段，显然缩完之后的序列是正数负数相邻的，长度的答案就是缩出来的段数

那么每一段中最多选择一个数，那么就选择这个段里面最大的那个数

# 回文和

## 题目大意

## ![20210831T2](D:\Blog\image\20210831T2.PNG)

## 算法讨论

首先每一对$(A_i,A_{n-i+1})$都是独立，考虑枚举最终的$x$

- 如果$A_i+A_{n-i+1}=x$，那么不需要修改
- 如果$\min(1+A_i,1+A_{n-i+1})\leq x\leq \max(k+A_i,k+A_{n-i+1})$，那么只需要一次修改
- 否则就需要两次修改

首先第二个条件一定是一个区间

那么可以通过一个差分算出每一个x被多少个第二个区间覆盖，那么用桶统计满足第一个条件的答案

# 旅行

## 题目大意

给定n个点的环，现在每一个点i可以连向环上距离不超过$r_i$的点

问从$s$到$t$不经过环上的边最短距离为多少

## 算法讨论

由于边权为$1$，那么不需要dij，只需要直接bfs就可以了

枚举其他点，计算距离即可

# 迷宫

## 题目大意

给定$n\times m$的网格，网格上有一些障碍，保证轮廓一定是障碍，现在有k条指令，每一条指令是dir d的形式，表示朝dir方向移动d格，如果在某一次移动过程中遇到了障碍，那么就中断指令的进行

现在网格上最多有26个起点，要求求出从这些起点出发，是否不会中断指令的进行

## 算法讨论

考虑模拟这个过程，会发现需要判断某一条直线上是否存在障碍

那么考虑对于每一行每一列都维护一个障碍数量的前缀和，然后计算某一条直线上是否有障碍，需要分4个方向讨论

以U为例

如果当前的位置为$(x,y)$，需要移动的距离为$d$

首先判断如果$x-d\leq 0$，那么一定不合法，否则如果$c_{x,y}-c_{x-d-1,y}>0$，那么说明其中一定存在障碍，也是不合法

# 园艺

## 题目大意

![20210831T3](D:\Blog\image\20210831T3.PNG)

## 算法讨论

首先深度=1的节点是不需要考虑的

那么就从深度$\geq 2$的节点开始考虑，显然如果要从一个节点连出新的边一定是连向$1$号节点的

那么如果一个节点没有直接连向1号节点，那么其相邻的节点一定需要连向1号节点

那么可以贪心选择，也可以DP出方案

设$f(x)$表示当前节点连向1号节点的答案，$dp(x,0/1)$表示当前节点没有连向1号节点，并且当前节点相邻的节点是否连向了1号节点
$$
f'(x)=f(x)+\min(dp(u,0),dp(u,1))\\
dp'(x,0)=dp(x,0)+dp(u,1)\\
dp'(x,1)=\min(dp(x,0)+f(u),dp(x,1)+\min(f(u),dp(u,1)))
$$

# 购物

## 题目大意

![20210831T4](D:\Blog\image\20210831T4.PNG)

## 算法讨论

首先需要将所有菜的价格/100，最后算出的答案*100

需要发现的是，如果连续用代金券消费了超过3道美食，就一定不优

因为显然可以在囤积代金券的过程中，超过一定的量就消费掉，可以选择的余地也更大（因为如果连续消费很多菜，其中可能消费了很多2000块的，事实上如果将这些拆分开使用就可以避免消费大额菜）

那么说明，当前手上拥有的代金券数量不会很多，那么我们就可以限定一个阈值$lim$，表示手上最多可能拥有多少代金券，$lim$最小可以达到$31$，但是我为了保险将lim设到了时间限制附近

考虑一个暴力的DP，设$dp(i,j)$表示消费到第$i$道菜的时候，手上有$j$元代金券时最少使用的现金数量

对于$j=0$的时候需要讨论一下特殊情况

对于$j>0$有
$$
dp(i,j)=\min(dp(i,j-\frac{a_i}{10})+a_i,dp(i,j+a_i))
$$
时间复杂度$O(nlim)$，不开long long 32位机可以$lim=2000$

