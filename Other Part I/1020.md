# FiveHundredEleven

## 题目大意

现在有n个卡片，每一个卡片上写着一个$<512$的数，现在有两个人在玩游戏，初始数字为0，每一次可以选出一张卡片，将数or这张卡片上的数字，最终得到512的人输，如果卡片选完没有决出胜负，那么无法进行操作的人输

## 算法讨论

如果我们知道某一个状态的数字是什么，那么我们就可以确定哪些卡片是一定不选的，假设当前数字为$s$，那么对于卡片$a_i\& s\neq a_i$来说，是一定不选的

由于可能还有一部分卡片，是$a_i\& s=a_i$，但是没有被选过，显然这些卡片是等价的，那么我们只需要记录一下进行进行的轮数，就可以知道还可以在这些卡片中选多少个

设$dp(s,i)$表示当前数字为$s$，进行$i$轮先手是否必胜

可以枚举$a_j\& s\neq a_j$的$a_j$，如果$dp(s|a_j,i+1)=0$，那么先手一定必胜

假设$a_j\& s=a_j$有k个，那么由于我们状态一定是合法转移过来的，那么一定有$k\geq i$，如果$k>i$，判断如果$dp(s,i+1)=0$，那么先手必胜

否则先手必败

# CuttingGrass

## 题目大意

现在给定n个数，每一个数初始为$a_i$，每一轮会增加$b_i$，每一轮增加过后可以选择一个数将其变成0，求最小时刻所有数的总和$\leq H$

## 算法讨论

首先可以发现答案不会超过$n$，这是因为不会选择同一个位置的数将其变成0两次

那么可以发现，当确定要进行k轮的时候，我们只需要在这n个数中选出最优的k个位置上的数，最大化变成0之前数字的和即可，显然按照$b$升序选择

那么先将b升序排序，设$f(i,j)$表示考虑到前i个数，已经选择$j$个数的最大和
$$
f(i,j)=\max(f(i-1,j),f(i-1,j-1)+a_i+jb_i)
$$
答案只需要找到最小的j，满足$\sum a_i+j\sum b_j-f(n,j)\leq H$即可

# BigOEasy

## 题目大意

给定一张有向图，判断这张图长度为L的路径数量上界是否为关于$L$的多项式

## 算法讨论

首先一张DAG是一定是可以被多项式限制住的

那么考虑将原来的有向图强连通缩点，那么只需要考虑每一个强连通分量中的图即可，如果这张图只是一个环的话，对于固定长度的路径，对于每一个起点只会存在一条路径，是可以被多项式限制住的

如果不只是一个环，那么在某一个节点就会有一种以上的选择，那么当路径长度较大的时候，路径数量就会趋向指数级别，那么是无法被多项式限制住的

那么只需要判断大小$>1$的联通分量中涉及的边数是否等于点数即可

# PolynomialRemainder

## 题目大意

给定二次函数$f(x)=ax^2+bx+c$，求一个数$y\in[0,10^9)$，使得$10^9|f(y)$

## 算法讨论

首先$10^9=2^9\times 5^9$，类似CRT合并，首先只考虑$A=2^9,B=5^9$

先分别直接枚举求出$k_1\in [0,A-1],k_2\in [0,B-1]$使得$f(k_1)\equiv 0(\bmod A),f(k_2)\equiv 0(\bmod B)$

那么合法的$y=k_1+AX,y=k_2+BY$

相当于解CRT的方程，直接CRT合并即可

求出最小正数解即可，显然如果有解，其范围一定在$[0,10^9)$之间

# HexagonPuzzle

## 题目大意

给定一个6边形蜂巢形图案

![img](https://vj.ppsucxtt.cn/c8b893472a243617c2b54fda54d5683e?v=1634691418)

每一个格子上都有一个物品，现在可以选择三个有公共端点的格子人，然后旋转其物品，求可以得到的状态数有多少个

## 算法讨论

首先对于一个联通的可以利用三个公共端点连接起来的一个联通块

我们可以先固定其中一个格子上物品的编号，不断固定下去，直到只剩下三个格子，那么这三个格子的编号已经是固定的，绝对顺序可以通过旋转3次得到3中不同的物品

假设一个联通块的大小为k，那么其贡献就是
$$
k(k-1)(k-2)...3
$$
只需要dfs处理出所有联通块，然后将所有联通块的贡献乘起来即可

# CubeColoring

## 题目大意

兔子太郎想给立方体的顶点着色。 他认为立方体会很漂亮，如果： 每个顶点都用适合它的颜色着色。 没有两个相邻的顶点具有相同的颜色。 

![img](https://vj.ppsucxtt.cn/f11840e3a2e32e5aee988599dfbe8718?v=1634693246)

有N种颜色。 您将获得一个 String[] 颜色。 如果第 i 个颜色元素的第 j 个字符是“Y”，则第 j 个颜色适用于第 i 个顶点。 返回给立方体上色的不同方式的数量。 

## 算法讨论

首先枚举$0,1,2,3$节点的颜色，然后对于一种染色方案，每5位记录一个节点上的颜色编号，那么总位数就是20位

然后枚举$4,5,6,7$节点的颜色，按照对应顺序记录

可以发现，如果0,1,2,3的一种染色方案可以对应一种4,5,6,7的染色方案，当且仅当两种染色方案压缩成的数字异或不存在某5位都为0

那么可以用fwt加速这个过程

时间复杂度$O(2^{20}+32^5)$

# RandomAppleEasy

## 题目大意

现在有n个盒子，第i个盒子中有$r_i$个红球，$g_i$个绿球，现在等概率选出一个非空子集s求
$$
\frac{1}{2^n-1}\sum\limits_{s}\frac{\sum\limits_{i\in s}a_i}{\sum\limits_{i\in s}a_i+b_i}
$$

$$
n\leq 50,a_i,b_i\leq 10
$$

## 算法讨论

注意到$a_i,b_i$的范围很小，那么说明$\sum a_i$不同的数量很少

那么可以直接背包DP，设$f(i,j,k)$表示考虑到前i个盒子中，红球和为j，红球和绿球和为$k$的方案数

转移直接背包转移即可
$$
f(i,j,k)=f(i-1,j,k)+f(i-1,j-a_i,k-a_i-r_i)
$$


# RectangularIsland

## 题目大意

![20211018T3](D:\Blog\image\20211018T3.PNG)

## 算法讨论

首先可以将两维状态分开考虑，可以求出走过$k$步之后，在这一维没有走出范围的答案

其中一维状态的长度为$n$，假设初始位置为$x$，设$dp(i,j)$表示走了$i$步之后，当前位置在$j$并且没有走出范围的方案数
$$
dp(i,j)=\frac{1}{4}(dp(i-1,j-1)+dp(i-1,j+1))
$$
直接递推即可，进而可以算出走过$k$步没有走出范围的概率$f(k)=\sum dp(k,i)$

那么最终答案就是
$$
\sum\limits_{k=0}^s \binom{s}{k} f(k)g(s-k)
$$
需要注意精度，需要开long double

# Nisoku

## 题目大意

给定n个卡片，每一个卡片上写着范围为$[1.5,10]$数字，现在可以将两个卡片合并，假设两个卡片上的数字分别为$a,b$，那么可以合并为$a+b$或者$a\times b$

求最终得到数的最大值

## 算法讨论

首先考虑，两个数的乘积大于其之和的条件
$$
ab\geq a+b\\
a\geq \frac{b}{b-1}
$$
可以发现只要$a\geq 3$，就是对于所有$b$都是$ab$比较大

注意到$2\times 1.5=3$，那么说明进行连续加法的数不会超过2个，可以将这些数排序，然后从头和尾开始配对

**一开始想着所有$<2$的数，进行上面的操作，然后$\geq 2$直接乘起来即可，但是这样是不对的**

**需要枚举一个分界点才行，这样才是考虑到所有的情况**

# ProductTriplet

## 题目大意

给定三个范围 ，求三元组元素分别在这个范围，满足$x\times y=z$
$$
x,y,z\leq10^9
$$

## 算法讨论

显然$\min(x,y)\leq \sqrt {10^9}$

那么我们就可以枚举$\min(x,y)$，那么另一个的范围为$\max(i,\lceil \frac{l_z}{i}\rceil ),\lfloor \frac{r_z}{i}\rfloor$

然后与另外一个元素的范围取交即可

会发现这样对于$i\times i$形式会计算两遍，那么需要减去这种的方案数

# CutSticks

## 题目大意

现在有n个木棍，可以进行最多C次操作，每一次操作选取一个木棍，然后从任意长度将其分成两段，最大化第k大的长度

## 算法讨论

首先二分答案，那么我们只需要判断是否可以将$\geq mid$木棍数量$\geq k$

如果$a_i< mid$，那么显然不会产生任何影响，那么就不要浪费操作数量在上面

否则一根木棍最多可以分成$\lfloor \frac{a_i}{mid}\rfloor $根木棍，需要的操作数为$\lfloor \frac{a_i}{mid}\rfloor -1$

那么将所有这样的木棍操作数求和，与$C$取min，然后加上$\geq mid$初始木棍数量，就是得到最大$>mid$的木棍数量

时间复杂度$O(n\log \epsilon^{-1})$

# HamiltonPath

## 题目大意

给定一张n个点的无向完全图，要求其中有多少条哈密顿路径使得经过指定的边

## 算法讨论

首先如果将指定的边单独提出，那么对于每一个联通块来说都需要是一条链，否则就不能走出哈密顿路径

对于一个点数$>1$的联通块，走过这些边的方案数为$2$

我们可以将一个联通块看作一个点，得到的新图还是一个完全图，一个n个点完全图的哈密顿路径数量为$n!$

那么答案为$n!2^k$，k为点数$>1$的联通块数量

