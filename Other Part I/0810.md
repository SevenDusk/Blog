# Water

## 题目大意

给定一张$n*m$的网格图，每一个格子有$h_{i,j}$的高度，现在下了一场雨，求出积水体积
$$
n,m\leq 100
$$

## 算法讨论

考虑将积水一层一层的填进去，那么对于每一层填进去的积水，一定都是在同一个高度上的

那么我们考虑维护一下同一个高度的联通块

每一次枚举联通块，如果这个联通块中的格子不在边界上，并且周围的格子都是高于这高度的，那么就可以将所有这个联通块的格子填上对应的积水

然后合并周围最低的格子所在的联通块和当前联通块，对于整个联通块的序列，可以用一个链表进行维护

最坏复杂度$O(n^4)$，事实上根本跑不满，常数非常小

第一次提交:AC

# Apocalypse Someday

## 题目大意

找到第n个，含有至少3个连续6的数字。
$$
n\leq 50000000
$$

## 算法讨论

可以利用数位DP，求出小于某一个数有多少个数合法

设$dp(i,j)$表示第i位，连续出现了$j$个6

如果$j=3$​，并且没有顶上界，那么后面几位就任意选，**否则就只能选到上界**

那么我们先确定这个数有几位，具体地就是将每一位当作9，然后跑一遍数位DP就行，只需要找到第一个值大于等于n就行

然后再一位一位进行确定就可以了，也是同样的思路从高位到低位进行枚举，然后每一位从大往小枚举这一位上的数字，然后找到最后一个方案数$\geq n$的数字

需要注意的是数组只需要开25就可以了，开大清空的时候会T

第一次提交:TLE

# Cutting Necklace

## 题目大意

给定一个环，每一个环上的位置都有一个权值$w_i$，现在需要取出环上的一段区间，这个区间的长度在$[l,r]$​内

问求出的最大平均数是多少
$$
n\leq 1000000
$$

## 算法讨论

一开始想复杂了，想了个斜率的几何意义，然后在那边动态维护凸包

事实上只需要一个二分
$$
\frac{s_r-s_l}{r-l}\geq x
\leftrightarrow \sum\limits_{i=l+1}^r(a_i-x)\geq 0
$$
那么只需要实数二分x，将每一个位置减掉$x$，，然后枚举起始位置$i$，然后将这个之后的$[l,r]$区间里面前缀和的最值求出来，如果大于当前前缀和的值，那么就是找到一组解

至于最大值可以用单调队列维护

需要注意分子可能为0，需要特殊判断

第一次提交:AC

# Beautiful Numbers

## 题目大意

求出前n个数，在B进制下，每一位的数字和能被B整除的数之和
$$
n\leq 10^{1001}\\
B\leq 1000
$$

## 算法讨论

考虑如果不加限制，对于数位小于等于n位的数字来说，满足条件的数字个数是$B^{n-1}-1$

那么如果考虑计算小于等于某一个数满足条件的数字个数就是$\sum\limits_{i=1}^w a_iB^{w-i-1}$

那么求出第n个数满足条件的就是将n分解成B进制，然后最低位填上一位，来满足数字和是B的倍数的条件

接下来考虑如何计算，考虑每一位上数字的贡献
$$
\sum\limits_{j=1}^{i-1}a_j B^{w-j-2} \frac{B(B-1)}{2}+\frac{B(B-1)}{2} B^{w-i-1}+a_i(\sum\limits_{j+1}^{w-1} a_j B^{w-j-1}+1)
$$
对于$i=w$，需要特殊处理

由于输入的数据规模很大，需要使用高精度，实现高精和低精的取模相除，相乘，高精之间的加法

不要用STL，还是过不去

复杂度$O(\log^2n)$

