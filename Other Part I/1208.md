# Covered Points

## 题目大意

![20211208T1](D:\Blog\image\20211208T1.PNG)

## 算法讨论

首先考虑将线段一条一条加入，假设两个端点为$A_i,B_i$，求出$D_i=B_i-A_i$的两维的最简整数比

那么从A开始走多少次能到达B就是AB之间的整点数量

然后需要求出这条线段与之前线段在整数点的交点，然后在贡献中去除这个点即可

直接用直线相交的方法求出交点，然后判断如果不是整数点，那么返回，如果不在线段上返回（可以定义点的比较方法，就是先比较x轴然后比较y轴，那么在两个点之间的点一定在两个点之间的范围内）

由于需要去重那么时间复杂度$O(n^2\log n)$

# Relatively Prime Powers

## 题目大意

![20211208T2](D:\Blog\image\20211208T2.PNG)

## 算法讨论

首先可以发现的是一个数$n$不合法的条件就是存在$x,k\neq 1$使得$x^k=n$

那么如果$k\geq 3$那么n最大为$10^6$我们可以暴力预处理出来所有不合法的数字，存在一个vector里面

然后接下来考虑$k=2$的情况，我们可以预先处理出来所有$n\leq 10^6$的答案，那么只需要考虑$n>10^6$的答案

可以发现一个$k=2$的情况是唯一对应着一个合法的$x$，那么如果记2-n之间的好数个数为$f(n)$，那么$k=2$的情况就有$f(\sqrt n)$个

那么不断递归下去即可

# Sources and Sinks

## 题目大意

![20211208T3](D:\Blog\image\20211208T3.PNG)

## 题目大意

首先将任意一个s可以到达的t集合求出

如果源点的数量不等于汇点的数量，那么显然是不合法的，因为多余的源点/汇点一定不在其他的联通分量之中

一种暴力的做法就是枚举所有的匹配情况，然后用之前s可达t的信息建出一个40个点的图，然后进行强连通缩点，这样时间复杂度为$O(k^22^k)$，稍加卡常应该可以过去

然后这个看上去很像一个匹配问题

首先考虑如果图中存在两个联通分量的情况，集合分别为A,B，可以发现的是两个集合中至少存在一个集合中的所有汇点都是连向这个集合中的源点的，否则如果两个集合都存在汇点连向其他集合的源点，那么显然整个图都是一个连通分量与假设矛盾

对于源点的情况也是同理，很显然这个结论可以适用于多个联通分量的情况

那么我们可以枚举源点的集合，求出从这个集合出发可以到达的所有汇点，一旦这些汇点都是连向源点集合，那么就形成了一个独立的连通分量（需要保证源点集合不为全集）

时间复杂度$O(k2^k)$

