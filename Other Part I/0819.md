给定$n$，有$r$个二元组$((a_1,b_1),(a_2,b_2),...,(a_r,b_r))$

满足$a_r+b_r=n$并且对于所有的$k$来说$a_k=1$或者$a_k=a_i+b_i,i<k$

定义代价为$\sum\limits_{k=1}^r a_kb_k$，将最小的代价记作$f(n)$

结论
$$
f(x)=g(x)\\
g(1)=0\\
g(2n)=g(n)+n^2\\
g(2n+1)=g(n)+n^2+2n
$$
对于证明这种问题，一个基本思路就是推出$g$的一些性质，检查f是否满足这些性质，如果满足并且这性质可以确定$f$那么就好了

$g$​两个性质

# 性质 1

$m,t\geq 0 $，$m$是奇数有
$$
g(2^tm)-g(2^tm-1)=t+m-1
$$
证明

当$t=0$时候显然成立
$$
g(2^tm)=g(2^{t-1}m)+(2^{t-1}m)^2\\
g(2^tm-1)=g(2^{t-1}m-1)+(2^{t-1}m-1)^2+2(2^{t-1}m-1)=g(2^{t-1}m-1)+(2^{t-1}m)^2-1
$$
因此
$$
g(2^tm)-g(2^tm-1)=g(2^{t-1}m)-g(2^{t-1}m-1)+1
$$
依次下去就可以得到结论

# 性质 2

$$
g(n)-g(x)\geq (n-x)^2+2x-n,x+2\leq n\leq 2x+1
$$

证明：

显然对于$x=1$​的情况都是可以验证的，那么考虑归纳法证明

在证明的过程种需要将$n,x$各自分成奇数偶数四类进行证明，考虑$n=2N,x=2X$的情况

得到$X+1\leq N\leq 2X$，对于$N=X+1$的情况，显然可以通过直接代入验证得到

对于$N\geq X+2$的时候，就需要用到上一次的归纳

$g(2N)-g(2X)=g(N)-g(x)+N^2-X^2\geq (N-X)^2+2X-N+N^2-X^2$

如果结论成立就需要满足$(N-X)^2+N^2-X^2+2X-N\geq (2N-2X)^2+4X-2N$

解出这个不等式，会发现是满足条件的

那么其他情况也是类似的



接下来就是要证明$f(n)=g(n)$

我们需要通过证明$f(n)\leq g(n)$和证明$f(n)\geq g(n)$来说明$f(n)=g(n)$

首先由于$g(n)$本身就是对应着一种方案，那么显然有$f(n)\leq g(n)$

考虑另外一边如何证明

首先我们需要证明$f$也是满足性质2的，如果满足就可以推出$f(n)\geq g(n)$

设$X+2\leq N\leq 2X+1$，同样也是考虑归纳证明，由于我们已经证明了$x=X-1$的情况，由于n满足$x=X-1$也一定满足$x=X$的情况，那么我们只需要验证$N=2X,N=2X+1$的时候是否满足

## $N=2X$

假设二元组序列最后一个元素是$(a,b),a+b=N,b>a$，那么有$X\leq b<2X$

那么显然代价就是$f(2X)=f(2X-1)+ab\geq f(b)+(2X-b)b\geq f(X)+X^2$

# $N=2X+1$

还是一样$(a,b),a+b=N,b\geq a$，那么有$X+1\leq b<2X+1$

### $b>X+1$

$$
f(N)\geq f(b)+(2X+1-b)b\\
\geq f(X)+X^2+2X
$$

### $b=X+1$

这就需要再往前面考虑一步$(a',b')$满足$b=a'+b'$
$$
f(N)\geq f(X)+a'b'+ab
=f(x)+b'(X+1-b')+X^2+X\geq f(X)+X^2+2X
$$


那么就完成了证明

至于构造方案

由于$f(2n+1)=f(x)+n^2+2n$

那么就可以构造$(n,n),(2n,1)$，或者$(n,1),(n+1,n)$