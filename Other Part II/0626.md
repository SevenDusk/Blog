# **CucumberWatering**

显然建造传送点的位置一定在这$n$个点之间

那么考虑将这个n个点放到数轴上，然后考虑点上有传送点的和没有传送点的位置连续段

那么对于两个时间相邻的点，如果同在一个没有传送点的连续段中，那么最优方案是两个点要么走到最近的传送点距离之和，要么是直接走过去，两者取min即可

如果不在同一段中，那么最优方案一定是走到最近的传送点的距离之和

那么记$val(l,r)$表示$[l,r]$作为一个极长没有传送点的连续段的代价之和，那么显然在这一段中最近的传送点是$l-1,r+1$其中之一

那么检查所有相邻点是否在$[l,r]$即可统计答案

设$dp(i,j,0/1)$表示考虑数轴上前$i$个点，当前最后一个点是否有传送点，已经确定$j$个传送点的位置的最小代价之和
$$
dp(i,j,0)=\min dp(k,j,1)+val(k+1,i)\\
dp(i,j,1)=\min dp(k,j-(k-i),0)
$$
那么时间复杂度就是$O(n^3)$

# EllysChessboard

由于是对曼哈顿距离取max ，那么可以考虑将曼哈顿距离转成切比雪夫距离

令原来网格图的坐标为$(x,y)$转化成$(x+y-2,x-y+7)$，那么所有点的坐标范围都是在$[0,15]$

由于切比雪夫距离为$\max (|x_1-x_2|,|y_1-y_2|)$，那么最大切比雪夫距离两维是独立的，分别对两维求出最大距离然后取max即可

那么可以设$dp(a,b,c,d)$，表示选择了$x\in[a,b],y\in [c,d]$所有点的代价，显然如果存在一个子矩阵中点当前没有选择，那么显然在之后$[a,b],[c,d]$的区间一定会扩大，那么加入该点的代价就会增加，那么一定是当前时刻加入最优

那么转移就是枚举一个不在范围内的点，然后更新$a,b,c,d$，将之前不在范围的而现在又在范围内的点计算出贡献即可

那么时间复杂度$O(n^6)$

# ColorfulBuilding

按降序排列建筑物，DP状态包含能看到的建筑物的数量和视野中建筑物的颜色。

- 如果你把第i个建筑物放在前面以外的地方，它会被你已经放置的$(i-1)$个阴影遮住，所以你能看到的建筑物的数量和前景的颜色不会改变, 组合的数量将是 $(i-1)$ 次

- 如果将第 $i$ 个建筑物放在前景中：

  - 如果颜色与前景中的颜色相同，则您可以看到的建筑物数量和前景中的颜色不会改变，因此将组合数相加到第 $(i-1)$ 个

  - 如果颜色与前面不同，则将可见建筑物的数量加1，替换前面建筑物的颜色，并将组合数量添加到第$i-1$个

直接做的时间复杂度就是$O(n^3)$
由于 第一种情况 和 第二种情况的第二种小情况 的处理只对每种颜色进行相同的计算，所以这样做n次是浪费的。
因此，它只有一个所有颜色的总值，例如，如果是1，那么只有总值应该乘以(i-1)，这时候需要将每种颜色乘以(i-1)，这样我们就需要将这部分的贡献放到之后统计，直到实际引用每种颜色的值
那么复杂度就是$O(n^2)$